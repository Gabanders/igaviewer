<link rel="import" href="polymer/polymer/polymer-element.html">

<dom-module id="ig-view">
  <template>
    <style>
      :host
      {
        display: block;
        max-width: 100%;
        text-align: center;
      }

      .viewer
      {
        display: inline-block;
        position: relative;
        width: 100%;
        font-size: 0;
      }

      @media (min-width: 1000px)
      {
        .viewer
        {
          max-width: 1000px;
        }
      }

      img
      {
        width: 100%;
        height: auto;
      }

      .nav-button
      {
        position: absolute;
        top: 0;
        width: 50%;
        height: 100%;
        z-index: 10;
      }

      #nav-b
      {
        left: 0;
      }

      #nav-f
      {
        right: 0;
      }

      .progress
      {
        color: white;
        font-family: "Open Sans";
        font-size: 25px;
      }

      .progress span
      {
        font-weight: bold;
      }
    </style>

    <div class="viewer">
      <a id="nav-b" class="nav-button" on-click="navBackward" href=""></a>
      <a id="nav-f" class="nav-button" on-click="navForward" href=""></a>
      <img src="[[curImg]]">
    </div>

    <div class="progress"><span>[[currentIndexB]]</span> of <span>[[totalImg]]</span></div>

  </template>

  <script>
    /*
      array imgs: array of img links
      int currentIndex: index of current shown img
      bound-int currentIndexB: bindable version of currentIndex, incremented by 1
      bound-int totalImg: number of loaded images
      bound-string curImg: src img of current displayed image
    */
    class igView extends Polymer.Element
    {
      static get is()
      {
        return "ig-view";
      }

      static get properties()
      {
        return {

        };
      }

      ready()
      {
        super.ready();

        this.currentIndex=0;
        this.totalImg=0;
      }

      //load array of image string urls
      loadImgs(imgs)
      {
        this.imgs=imgs;
        this.totalImg=imgs.length;
        this.viewImg(0);
      }

      //jump to given index
      viewImg(index)
      {
        if (index>=this.imgs.length || index<0)
        {
          //insert something for end or beginning of gallery here
          return;
        }

        this.currentIndex=index;
        this.currentIndexB=index+1;
        this.curImg=this.imgs[index];
      }

      navForward(e)
      {
        e.preventDefault();
        this.viewImg(this.currentIndex+1);
      }

      navBackward(e)
      {
        e.preventDefault();
        this.viewImg(this.currentIndex-1);
      }
    }

    customElements.define(igView.is,igView);
  </script>
</dom-module>